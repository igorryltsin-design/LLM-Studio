import{j as e}from"./index-Djbc1ni5.js";const S=({activeRun:m,domains:d,tags:g,difficulties:k,hotspots:i,recommendations:o,compact:t,formatScore:l,formatPercent:N,difficultyLabels:h})=>{if(!m)return e.jsx("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm shadow-slate-900/20 dark:border-slate-800 dark:bg-slate-900/60 dark:shadow-none",children:e.jsx("div",{className:"mt-6 rounded-xl border border-dashed border-slate-300 bg-white p-6 text-center text-sm text-slate-500 dark:border-slate-700 dark:bg-slate-900/40",children:"Запустите прогон, чтобы построить дашборд."})});const f=t?d.slice(0,3):d,u=t?g.slice(0,4):g,v=t?k.slice(0,2):k,p=t?i.slice(0,3):i,j=t?o.slice(0,3):o,w=t?"space-y-3":"space-y-4",r=t?"gap-2":"gap-3",x=t?"p-2.5":"p-3",b=d.slice().sort((s,a)=>(s.averageScore??2)-(a.averageScore??2)).find(s=>s.averageScore!=null);return e.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white/90 p-4 shadow-sm shadow-slate-900/20 dark:border-slate-800 dark:bg-slate-900/70 dark:shadow-none xl:col-span-2",children:[e.jsxs("header",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"h-5 w-5 rounded-full bg-emerald-400/20"}),e.jsx("h3",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Дашборд качества"})]}),e.jsxs("span",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:["Горячих тем: ",p.length,"/",i.length," · Рекомендаций: ",j.length,"/",o.length]})]}),e.jsxs("div",{className:`mt-3 ${w} text-xs text-slate-500 dark:text-slate-300`,children:[e.jsxs("div",{className:`flex flex-col items-center ${t?"gap-3 md:flex-row md:items-start":"gap-4 md:flex-row md:items-start"}`,children:[e.jsxs("div",{className:`relative ${t?"h-40 w-40":"h-48 w-48"}`,children:[e.jsx("div",{className:"h-full w-full rounded-full shadow-inner shadow-slate-900/10",style:{background:(()=>{if(!d.length)return"conic-gradient(#334155 0 100%)";let s=0;return`conic-gradient(${d.map(n=>{const c=s*100;s+=n.share;const $=Math.min(100,s*100);return`${n.color} ${c}% ${$}%`}).join(", ")})`})()}}),e.jsxs("div",{className:"absolute inset-6 flex flex-col items-center justify-center rounded-full bg-white/95 text-center shadow-inner shadow-slate-900/10 dark:bg-slate-950/80",children:[e.jsx("span",{className:"text-[11px] uppercase tracking-wide text-slate-400 dark:text-slate-500",children:"Всего"}),e.jsx("span",{className:"text-lg font-semibold text-slate-800 dark:text-slate-100",children:m.metrics.total}),b&&e.jsxs("div",{className:"mt-1 text-[10px] text-slate-500 dark:text-slate-400",children:[e.jsxs("p",{className:"font-semibold text-slate-600 dark:text-slate-200",children:["Риск: ",b.domain]}),e.jsx("p",{children:l(b.averageScore,3)})]})]})]}),e.jsx("div",{className:`flex-1 ${w}`,children:f.map(s=>{const a=Math.max(1,Math.round(s.share*100)),n=Math.round(s.coverageShare*100),c=s.delta!=null?`${s.delta>=0?"+":""}${s.delta.toFixed(3)}`:"—";return e.jsxs("div",{className:`rounded-xl border border-slate-200 bg-white/95 ${x} shadow-sm shadow-slate-900/5 dark:border-slate-800 dark:bg-slate-900/80`,children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px] text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-100",children:[e.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{backgroundColor:s.color}}),s.domain]}),e.jsx("span",{className:`text-sm font-semibold ${s.toneClass.replace("bg-","text-")}`,children:l(s.averageScore,3)})]}),t?e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-[10px] text-slate-500 dark:text-slate-400",children:[e.jsxs("span",{children:[a,"% выборки"]}),e.jsxs("span",{children:["Δ ",c]})]}):e.jsxs("div",{className:`mt-2 flex flex-wrap items-center ${r} text-[10px] text-slate-500 dark:text-slate-400`,children:[e.jsxs("span",{children:["Доля: ",a,"%"]}),e.jsxs("span",{children:["Покрытие: ",n,"%"]}),e.jsxs("span",{children:["Оценено: ",s.scored,"/",s.total]}),e.jsxs("span",{children:["Δ: ",c]})]})]},s.domain)})})]}),e.jsxs("div",{className:`grid grid-cols-1 ${r} md:grid-cols-2`,children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Теги"}),e.jsx("div",{className:`mt-2 ${t?"space-y-2":"space-y-3"} overflow-y-auto pr-1 ${t?"max-h-36":"max-h-48"}`,children:u.length>0?u.map(s=>e.jsxs("div",{className:`rounded-lg border border-slate-200 bg-white/95 ${x} text-slate-600 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-200`,children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[e.jsxs("span",{className:"font-semibold",children:["#",s.tag]}),e.jsx("span",{className:`font-semibold ${s.toneClass}`,children:l(s.averageScore,3)})]}),t?e.jsxs("p",{className:"mt-1 text-[10px] text-slate-500 dark:text-slate-400",children:["Покрытие ",N(s.coverageShare)]}):e.jsxs("div",{className:`mt-1 flex flex-wrap items-center ${r} text-[10px] text-slate-500 dark:text-slate-400`,children:[e.jsxs("span",{children:["Оценено: ",s.scored,"/",s.total]}),e.jsxs("span",{children:["Покрытие: ",N(s.coverageShare)]}),e.jsxs("span",{children:["Review: ",s.needsReview]})]})]},s.tag)):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-4 text-center text-[11px] text-slate-400 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-500",children:"Вопросы без тегов."})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Сложность"}),e.jsx("div",{className:`mt-2 ${t?"space-y-2":"space-y-3"}`,children:v.length>0?v.map(s=>{const a=s.delta!=null?`${s.delta>=0?"+":""}${s.delta.toFixed(3)}`:"—";return e.jsxs("div",{className:`rounded-lg border border-slate-200 bg-white/95 ${x} text-slate-600 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-200`,children:[e.jsxs("div",{className:"flex items-center justify-between text-[11px]",children:[e.jsx("span",{className:"font-semibold",children:h[s.difficulty]}),e.jsx("span",{className:`font-semibold ${s.toneClass}`,children:l(s.averageScore,3)})]}),t?e.jsxs("p",{className:"mt-1 text-[10px] text-slate-500 dark:text-slate-400",children:["Δ ",a]}):e.jsxs("div",{className:`mt-1 flex flex-wrap items-center ${r} text-[10px] text-slate-500 dark:text-slate-400`,children:[e.jsxs("span",{children:["Оценено: ",s.scored,"/",s.total]}),e.jsxs("span",{children:["База: ",l(s.baselineScore,3)]}),e.jsxs("span",{children:["Δ: ",a]})]})]},s.difficulty)}):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-4 text-center text-[11px] text-slate-400 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-500",children:"Нет данных по сложности."})})]})]}),e.jsxs("div",{className:`grid grid-cols-1 ${r} md:grid-cols-3`,children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Горячие вопросы"}),e.jsx("div",{className:`mt-2 ${t?"space-y-2 max-h-44":"space-y-3 max-h-60"} overflow-y-auto pr-1`,children:p.length>0?p.map(s=>e.jsxs("div",{className:`rounded-lg border ${s.needsReview?"border-rose-400 dark:border-rose-500/60":"border-slate-200 dark:border-slate-800"} bg-white/95 ${x} text-slate-600 dark:bg-slate-900/70 dark:text-slate-200`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:s.question}),e.jsx("span",{className:`text-sm font-semibold ${s.toneClass}`,children:l(s.score,3)})]}),t?e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-[10px] text-slate-500 dark:text-slate-400",children:[e.jsx("span",{children:s.domain}),e.jsx("span",{className:"mx-1",children:"·"}),e.jsx("span",{children:h[s.difficulty]})]}):e.jsxs("div",{className:`mt-1 flex flex-wrap items-center ${r} text-[10px] text-slate-500 dark:text-slate-400`,children:[e.jsxs("span",{children:["Домен: ",s.domain]}),e.jsxs("span",{children:["Сложность: ",h[s.difficulty]]}),s.tags.length>0&&e.jsxs("span",{children:["Теги: ",s.tags.join(", ")]}),e.jsxs("span",{children:["Статус: ",s.status]})]}),!t&&s.reviewNotes&&e.jsx("p",{className:"mt-1 rounded-lg bg-slate-800/40 p-2 text-[10px] italic text-slate-400 dark:bg-slate-800/60",children:s.reviewNotes})]},s.id)):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-4 text-center text-[11px] text-slate-400 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-500",children:"Все вопросы проходят критерии качества."})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-500 dark:text-slate-400",children:"Рекомендации к датасету"}),e.jsx("div",{className:`mt-2 ${t?"space-y-2":"space-y-3"}`,children:j.length>0?j.map(s=>e.jsxs("div",{className:`rounded-lg border border-slate-200 bg-white/95 ${x} text-slate-600 dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-200`,children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-100",children:s.label}),!t&&e.jsxs("p",{className:"mt-1 text-[10px] text-slate-500 dark:text-slate-400",children:["Повторяющиеся проблемы: ",s.count]})]},s.key)):e.jsx("div",{className:"rounded-xl border border-dashed border-slate-300 bg-white p-4 text-center text-[11px] text-slate-400 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-500",children:"Перекосы не обнаружены."})})]})]})]})]})};export{S as default};
